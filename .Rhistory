# Construct control and test data
seonum_340[,1] <- as.Date(seonum_340[,1],  "%Y-%m-%d")
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
seonum_340 <- read.csv("seonum_340.csv", sep = ',',header = TRUE)
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
seonum_340 <- read.csv("seonum_340.csv", sep = ',',header = TRUE)
setwd("~/Google Drive/DS/Summer")
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
seonum_340 <- read.csv("seonum_340.csv", sep = ',',header = TRUE)
head(seonum_340)
dim(seonum_340)
# Construct control and test data
seonum_340[,1] <- as.Date(seonum_340[,1],  "%Y-%m-%d")
head(seonum_340)
control <- seonum_340[seonum_340$test_bucket == 'off', c(1,3)]
treatment <- seonum_340[seonum_340$test_bucket == 'on1', c(1,3)]
mergedata=data.frame(merge(control,treatment,by="dt",sort = TRUE))
head(mergedata)
# Define date
times=as.Date(mergedata[,1])
launch_index=which(times=='2021-09-07')
pre.period <- c(1, launch_index)
post.period <- c(launch_index+1,nrow(mergedata))
# data is (test, control, date)
fit_data=zoo(cbind(mergedata[,3],mergedata[,2]),times)
install.packages("zoo")
library(CausalImpact)
install.packages("CausalImpact")
# data is (test, control, date)
fit_data=zoo(cbind(mergedata[,3],mergedata[,2]),times)
install.packages("zoo")
# data is (test, control, date)
fit_data=zoo(cbind(mergedata[,3],mergedata[,2]),times)
library(zoo)
# data is (test, control, date)
fit_data=zoo(cbind(mergedata[,3],mergedata[,2]),times)
# Model fit
impact <- CausalImpact(fit_data,times[pre.period] , times[post.period])
library(CausalImpact)
plot(impact)
# Model fit
impact <- CausalImpact(fit_data,times[pre.period] , times[post.period])
plot(impact)
library(CausalImpact)
library(zoo)
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
seonum_340 <- read.csv("seonum_340.csv", sep = ',',header = TRUE)
head(seonum_340)
dim(seonum_340)
# Construct control and test data
seonum_340[,1] <- as.Date(seonum_340[,1],  "%Y-%m-%d")
head(seonum_340)
View(seonum_340)
View(seonum_340)
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
seonum_340 <- read.csv("seonum_340.csv", sep = ',',header = TRUE)
head(seonum_340)
# Construct control and test data
seonum_340[,1] <- as.Date(seonum_340[,1],  format="%m/%d/%y")
head(seonum_340)
control <- seonum_340[seonum_340$test_bucket == 'off', c(1,3)]
treatment <- seonum_340[seonum_340$test_bucket == 'on1', c(1,3)]
View(control)
View(treatment)
View(mergedata)
mergedata=data.frame(merge(control,treatment,by="dt",sort = TRUE))
# Define date
times=as.Date(mergedata[,1])
launch_index=which(times=='2021-09-07')
pre.period <- c(1, launch_index)
post.period <- c(launch_index+1,nrow(mergedata))
View(mergedata)
# data is (test, control, date)
fit_data=zoo(cbind(mergedata[,3],mergedata[,2]),times)
# Model fit
impact <- CausalImpact(fit_data,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
summary(impact, "report")
setwd("~/Google Drive/202109 listing level target:floor margin/casual impact")
library(CausalImpact)
library(zoo)
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
data <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
View(data)
View(data)
head(data)
# Construct control and test data
seonum_340[,1] <- as.Date(seonum_340[,1],  format="%m/%d/%y")
dim(data)
# Construct control and test data
data[,1] <- as.Date(data[,1],  format="%m/%d/%y")
head(data)
#seonum_340 <- read.csv("Documents/Houzz/Notebook/Consumer/R-Causal Impact/seonum_340_pro_view.csv", sep = ',',header = TRUE)
data <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
head(data)
# Construct control and test data
data[,1] <- as.Date(data[,1],  format="%Y-%m-%d")
head(data)
View(seonum_340)
data <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
data <- order(data)
data <- data[order(data$week)]
data$week
data[, 1]
data <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
View(data)
data[, 1]
data <-
data[order(data$week)]
data <-
data[order(data$week)]
data[order(data$week)]
data$week
order(data)
data <- data[order(data$week)]
View(data)
View(data)
data$week
data[order(data$week)]
order(data$week)
order(data$week)
data[order(data$week)]
data[1]
data[1,]
data[order(data$week), ]
data <- data[order(data$week), ]
# Construct control and test data
data[,1] <- as.Date(data[,1],  format="%Y-%m-%d")
head(data)
# Define date
times=as.Date(data[,1])
launch_index=which(times=='2021-10-22')
launch_index=which(times=='2021-10-18')
data$period=='pre'
which(data$period=='pre')
which(data$period=='pre')
min(which(data$period=='pre'))
data <- data[order(data$week, data$period), ]
data <- data[order(data$week, data$period), ]
data <- data[order(data$week, ~data$period), ]
data <- data[order(data$week, -data$period), ]
data <- data[order(data$week, -data$period), ]
data[order(data$period), ]
data[order(data$period), decreasing=TRUE]
data[order(data$period, decreasing=TRUE), ]
data[order(data$period, decreasing=TRUE), ][order(data$week,]
data <- data[order(data$week), ]
head(data)
View(data)
View(data)
data <- data[order(data$period, decreasing=TRUE), ]
data <- data[order(data$week), ]
# Construct control and test data
data[,1] <- as.Date(data[,1],  format="%Y-%m-%d")
min(which(data$period=='pre')), min(which(data$period=='pre')),
launch_index=which(times=='2021-10-18')
min(which(data$period=='pre')), min(which(data$period=='pre'))
which(data$period=='pre')
which(data$period=='post')
pre.period <- c(min(which(data$period=='pre')), max(which(data$period=='pre')))
post.period <- c(min(which(data$period=='pots')), max(which(data$period=='post')))
post.period <- c(min(which(data$period=='post')), max(which(data$period=='post')))
data[, [1:2]]
data[, 1:2]
data[, 3:8, 10]
X = data[, 3:8, 10]
View(X)
View(X)
y = data[, 9]
# data is (test, control, date)
fit_data=zoo(cbind(y, X,times)
# data is (test, control, date)
fit_data=zoo(cbind(y, X,times)
# data is (test, control, date)
fit_data=zoo(cbind(y, X),times)
# data is (test, control, date)
fit_data=zoo(cbind(y, X),times)
X = data[, 3:8, 10]
# data is (test, control, date)
fit_data=zoo(cbind(y, X),times)
# data is (test, control, date)
fit_data=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_data,times[pre.period] , times[post.period])
data <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
head(data)
# Define date
times=as.Date(data[,1])
pre.period <- c(min(which(data$period=='pre')), max(which(data$period=='pre')))
post.period <- c(min(which(data$period=='post')), max(which(data$period=='post')))
X = data[, 3:8, 10]
y = data[, 9]
# data is (test, control, date)
fit_data=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_data,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
####### T1 ######
# GMV
gmv_t1 <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
gmv_t1 <- gmv_t1[order(gmv_t1$period, decreasing=TRUE), ]
gmv_t1 <- gmv_t1[order(gmv_t1$week), ]
head(gmv_t1)
dim(gmv_t1)
# Construct control and test gmv_t1
gmv_t1[,1] <- as.Date(gmv_t1[,1],  format="%Y-%m-%d")
head(gmv_t1)
# Define date
times=as.Date(gmv_t1[,1])
pre.period <- c(min(which(gmv_t1$period=='pre')), max(which(gmv_t1$period=='pre')))
post.period <- c(min(which(gmv_t1$period=='post')), max(which(gmv_t1$period=='post')))
X = gmv_t1[, 3:8, 10]
y = gmv_t1[, 9]
# gmv_t1 is (test, control, date)
fit_gmv_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_gmv_t1,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
summary(impact, "report")
####### T1 ######
# CM
cm_t1 <- read.csv("weekly_pv_cm_t1.csv", sep = ',',header = TRUE)
View(cm_t1)
cm_t1 <- cm_t1[order(cm_t1$period, decreasing=TRUE), ]
cm_t1 <- cm_t1[order(cm_t1$week), ]
head(cm_t1)
dim(cm_t1)
# Construct control and test cm_t1
cm_t1[,1] <- as.Date(cm_t1[,1],  format="%Y-%m-%d")
head(cm_t1)
# Define date
times=as.Date(cm_t1[,1])
pre.period <- c(min(which(cm_t1$period=='pre')), max(which(cm_t1$period=='pre')))
post.period <- c(min(which(cm_t1$period=='post')), max(which(cm_t1$period=='post')))
X = cm_t1[, 3:8, 10]
y = cm_t1[, 9]
# cm_t1 is (test, control, date)
fit_cm_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_cm_t1,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
summary(impact, "report")
library(CausalImpact)
library(zoo)
##########################################################
# Experiment overall analysis
##########################################################
####### T1 ######
# GMV
gmv_t1 <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
gmv_t1 <- gmv_t1[order(gmv_t1$period, decreasing=TRUE), ]
gmv_t1 <- gmv_t1[order(gmv_t1$week), ]
head(gmv_t1)
dim(gmv_t1)
# Construct control and test gmv_t1
gmv_t1[,1] <- as.Date(gmv_t1[,1],  format="%Y-%m-%d")
head(gmv_t1)
# Define date
times=as.Date(gmv_t1[,1])
pre.period <- c(min(which(gmv_t1$period=='pre')), max(which(gmv_t1$period=='pre')))
post.period <- c(min(which(gmv_t1$period=='post')), max(which(gmv_t1$period=='post')))
X = gmv_t1[, 3:8, 10]
y = gmv_t1[, 9]
# gmv_t1 is (test, control, date)
fit_gmv_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_gmv_t1,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
summary(impact, "report")
####### T1 ######
# CM
cm_t1 <- read.csv("weekly_pv_cm_t1.csv", sep = ',',header = TRUE)
cm_t1 <- cm_t1[order(cm_t1$period, decreasing=TRUE), ]
cm_t1 <- cm_t1[order(cm_t1$week), ]
head(cm_t1)
dim(cm_t1)
# Construct control and test cm_t1
cm_t1[,1] <- as.Date(cm_t1[,1],  format="%Y-%m-%d")
head(cm_t1)
# Define date
times=as.Date(cm_t1[,1])
pre.period <- c(min(which(cm_t1$period=='pre')), max(which(cm_t1$period=='pre')))
post.period <- c(min(which(cm_t1$period=='post')), max(which(cm_t1$period=='post')))
X = cm_t1[, 3:8, 10]
y = cm_t1[, 9]
# cm_t1 is (test, control, date)
fit_cm_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_cm_t1,times[pre.period] , times[post.period])
plot(impact)
summary(impact)
summary(impact, "report")
plot(impact)
library(CausalImpact)
library(zoo)
##########################################################
# Experiment overall analysis
##########################################################
####### T1 ######
# GMV
gmv_t1 <- read.csv("weekly_pv_gmv_t1.csv", sep = ',',header = TRUE)
gmv_t1 <- gmv_t1[order(gmv_t1$period, decreasing=TRUE), ]
gmv_t1 <- gmv_t1[order(gmv_t1$week), ]
head(gmv_t1)
dim(gmv_t1)
# Construct control and test gmv_t1
gmv_t1[,1] <- as.Date(gmv_t1[,1],  format="%Y-%m-%d")
head(gmv_t1)
# Define date
times=as.Date(gmv_t1[,1])
pre.period <- c(min(which(gmv_t1$period=='pre')), max(which(gmv_t1$period=='pre')))
post.period <- c(min(which(gmv_t1$period=='post')), max(which(gmv_t1$period=='post')))
X = gmv_t1[, 3:8, 10]
y = gmv_t1[, 9]
# gmv_t1 is (test, control, date)
fit_gmv_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_gmv_t1,times[pre.period] , times[post.period])
summary(impact)
summary(impact, "report")
plot(impact)
####### T1 ######
# CM
cm_t1 <- read.csv("weekly_pv_cm_t1.csv", sep = ',',header = TRUE)
cm_t1 <- cm_t1[order(cm_t1$period, decreasing=TRUE), ]
cm_t1 <- cm_t1[order(cm_t1$week), ]
head(cm_t1)
dim(cm_t1)
# Construct control and test cm_t1
cm_t1[,1] <- as.Date(cm_t1[,1],  format="%Y-%m-%d")
head(cm_t1)
# Define date
times=as.Date(cm_t1[,1])
pre.period <- c(min(which(cm_t1$period=='pre')), max(which(cm_t1$period=='pre')))
post.period <- c(min(which(cm_t1$period=='post')), max(which(cm_t1$period=='post')))
X = cm_t1[, 3:8, 10]
y = cm_t1[, 9]
# cm_t1 is (test, control, date)
fit_cm_t1=zoo(cbind(y, X),times)
# Model fit
impact <- CausalImpact(fit_cm_t1,times[pre.period] , times[post.period])
summary(impact)
summary(impact, "report")
plot(impact)
